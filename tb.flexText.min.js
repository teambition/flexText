(function(b){function d(a,c){this.$textarea=b(a);this.onchange="function"===typeof c?c:function(){};this._init()}d.prototype={_init:function(){var a=this;a.$textarea.wrap('<div class="flex-text-wrap" />').before("<div><span /><br></div>");a.$span=a.$textarea.prev().find("span");a.oldValue="";a.$textarea.on("input propertychange keyup change",function(c){var b=a.$textarea.val();b!==a.oldValue&&(a.oldValue=b,a._mirror(b),a.onchange(c))});b.valHooks.textarea={get:function(a){return a.value.replace(/\r?\n/g,
"\r\n")}};a.$textarea.trigger("change")},_mirror:function(a){this.$span.text(a)}};b.fn.flexText=function(a){return this.each(function(){b.data(this,"flexText")||b.data(this,"flexText",new d(this,a))})}})(jQuery);
